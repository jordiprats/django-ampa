{% extends 'base.html' %}

{% load static %}

{% block content %}

{% if instance_classe.alumnes.count == 0 %}

<center>
<h1>procesant...</h1>

<!-- <img src="{% static 'img/bored_kid.gif' %}"> -->

</center>
<input type="hidden" id="refresh_interval_ms" name="refresh_interval_ms" value="10000">

<script>
    setTimeout(function() {
  location.reload();
}, document.getElementById("refresh_interval_ms").value);
</script>

{% else %}

  {% if not instance_classe.ready_to_send %}
  <form style="display: inline;" action="{% url 'send.email' classe_id=instance_classe.id %}" method="GET">
    <button class="float-right btn btn-danger" type="submit">enviar email</button>
  </form>
  {% endif %}

<h1>{{ instance_classe.nom }}</h1>
{{ instance_classe.curs }}

<table class="table table-bordred table-striped">
    <thead>
      <tr>
        <th>n√∫mero llista</th>
        <th>nom</th>
        <th>Tutor 1</th>
        <th>Tutor 2</th>
        <th>Validat</th>
      </tr>
    </thead>
    <tbody>
      {% for alumne in instance_classe.alumnes.all %}
        <tr>
          <td>{{ alumne.num_llista }}</td>
          <td><a href="{% url 'edit.alumne' alumne_id=alumne.id %}">{{ alumne.print_name }}</a></td>
          <td>{{ alumne.tutor1_cessio|yesno:"<i class=\"fas fa-check\"></i>,<i class=\"fas fa-times-circle\"></i>" | safe }}</td>
          <td>{{ alumne.tutor2_cessio|yesno:"<i class=\"fas fa-check\"></i>,<i class=\"fas fa-times-circle\"></i>" | safe }}</td>
          <td>{{ alumne.validat|yesno:"<i class=\"fas fa-check\"></i>,<i class=\"fas fa-times-circle\"></i>" | safe }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endif %}

{% endblock %}